<h1 class="fs-secondary__heading">Edit {{ shiftToEdit?.location }} shift</h1>

<form [formGroup]="updateShiftForm" (ngSubmit)="updateShift(updateShiftForm)">
  <fieldset class="flex-column flow">
    <mat-icon routerLink="/shifts">close</mat-icon>
    <legend>Shift details</legend>
    <div class="input-container flex-column">
      <div class="form-field">
        <label for="startDate">Start date</label>
        <input type="date" formControlName="startDate" #startDate />
        <div
          *ngIf="
            updateShiftForm.controls['startDate'].invalid &&
            (updateShiftForm.controls['startDate'].dirty ||
              updateShiftForm.controls['startDate'].touched)
          "
          class="error"
        >
          <p
            *ngIf="updateShiftForm.controls['startDate'].errors?.['required'] && 
          updateShiftForm.controls['startDate'].dirty
          "
          >
            Required
          </p>
        </div>
      </div>
      <div class="form-field">
        <label for="startTime">Start time</label>
        <input type="time" formControlName="startTime" #startTime />
        <div
          *ngIf="
            updateShiftForm.controls['startTime'].invalid &&
            (updateShiftForm.controls['startTime'].dirty ||
              updateShiftForm.controls['startTime'].touched)
          "
          class="error"
        >
          <p
            *ngIf="updateShiftForm.controls['startTime'].errors?.['required'] && 
          updateShiftForm.controls['startTime'].dirty
          "
          >
            Required
          </p>
        </div>
      </div>
      <div class="form-field">
        <label for="endDate">End date</label>
        <input
          type="date"
          formControlName="endDate"
          #endDate
          (change)="showErrors()"
        />
        <div
          *ngIf="
            updateShiftForm.controls['endDate'].invalid &&
            (updateShiftForm.controls['endDate'].dirty ||
              updateShiftForm.controls['endDate'].touched)
          "
          class="error"
        >
          <p
            *ngIf="updateShiftForm.controls['endDate'].errors?.['required'] && 
          updateShiftForm.controls['endDate'].dirty
          "
          >
            Required
          </p>
        </div>
      </div>
      <div class="form-field">
        <label for="endTime">End time</label>
        <input
          type="time"
          formControlName="endTime"
          #endTime
          (change)="showErrors()"
        />
        <div
          *ngIf="
            updateShiftForm.controls['endTime'].invalid &&
            (updateShiftForm.controls['endTime'].dirty ||
              updateShiftForm.controls['endTime'].touched)
          "
          class="error"
        >
          <p
            *ngIf="updateShiftForm.controls['endTime'].errors?.['required'] && 
          updateShiftForm.controls['endTime'].dirty
          "
          >
            Required
          </p>
        </div>
      </div>
    </div>
    <div class="input-container flex-column">
      <div class="form-field">
        <label for="hourlyWage">Wage / h</label>
        <input
          type="number"
          placeholder="Wage / h"
          formControlName="wage"
          #wage
        />
        <div
          *ngIf="
            updateShiftForm.controls['wage'].invalid &&
            (updateShiftForm.controls['wage'].dirty ||
              updateShiftForm.controls['wage'].touched)
          "
          class="error"
        >
          <p
            *ngIf="updateShiftForm.controls['wage'].errors?.['required'] && 
          updateShiftForm.controls['wage'].dirty
          "
          >
            Required
          </p>
          <p *ngIf="updateShiftForm.controls['wage'].errors?.['max']">
            Maximum 10 mil
          </p>
        </div>
      </div>
      <div class="form-field">
        <label for="location">Location</label>
        <input
          type="text"
          placeholder="Location"
          maxlength="21"
          formControlName="location"
          #location
        />
        <div
          *ngIf="
            updateShiftForm.controls['location'].invalid &&
            (updateShiftForm.controls['location'].dirty ||
              updateShiftForm.controls['location'].touched)
          "
          class="error"
        >
          <p
            *ngIf="updateShiftForm.controls['location'].errors?.['required'] && 
          updateShiftForm.controls['location'].dirty
          "
          >
            Required
          </p>
          <p *ngIf="updateShiftForm.controls['location'].errors?.['minlength']">
            Minimum 2 characters
          </p>
          <p *ngIf="updateShiftForm.controls['location'].errors?.['maxlength']">
            Maximum 20 characters
          </p>
        </div>
      </div>
    </div>
    <div class="input-container flex-column">
      <div class="form-field">
        <label for="name">Unique name</label>
        <input
          type="text"
          placeholder="Unique name"
          maxlength="21"
          formControlName="uniqueName"
          #uniqueName
        />
        <div
          *ngIf="
            updateShiftForm.controls['uniqueName'].invalid &&
            (updateShiftForm.controls['uniqueName'].dirty ||
              updateShiftForm.controls['uniqueName'].touched)
          "
          class="error"
        >
          <p
            *ngIf="updateShiftForm.controls['uniqueName'].errors?.['required'] && 
          updateShiftForm.controls['uniqueName'].dirty
          "
          >
            Required
          </p>
          <p
            *ngIf="updateShiftForm.controls['uniqueName'].errors?.['minlength']"
          >
            Minimum 2 characters
          </p>
          <p
            *ngIf="updateShiftForm.controls['uniqueName'].errors?.['maxlength']"
          >
            Maximum 20 characters
          </p>
          <p
            *ngIf="updateShiftForm.controls['uniqueName'].errors?.['uniqueName']"
          >
            Name already exists
          </p>
        </div>
      </div>
    </div>
    <div class="input-container flex-column">
      <div class="form-field">
        <label for="description">Description</label>
        <textarea
          cols="50"
          placeholder="Description"
          formControlName="description"
          #description
          maxlength="201"
        ></textarea>
        <div
          *ngIf="
            updateShiftForm.controls['description'].invalid &&
            (updateShiftForm.controls['description'].dirty ||
              updateShiftForm.controls['description'].touched)
          "
          class="error"
        >
          <p
            *ngIf="updateShiftForm.controls['description'].errors?.['required'] && 
          updateShiftForm.controls['description'].dirty
          "
          >
            Required
          </p>
          <p
            *ngIf="updateShiftForm.controls['description'].errors?.['minlength']"
          >
            Minimum 2 characters
          </p>
          <p
            *ngIf="updateShiftForm.controls['description'].errors?.['maxlength']"
          >
            Maximum 200 characters
          </p>
        </div>
      </div>
    </div>
    <p class="delete">
      No longer nedded? <a (click)="openDialog()">Delete shift</a>
    </p>
  </fieldset>
  <button
    type="submit"
    [disabled]="updateShiftForm.invalid || updateShiftForm.pristine"
  >
    Update
  </button>
</form>
